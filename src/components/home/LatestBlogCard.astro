---
import type { BlogEntry } from "@/types";
import { Image } from "astro:assets";
import { formatDate } from "@lib/formatDate";
import { upperHumanize } from "@lib/textConverter";
import { FaRegFolder } from "react-icons/fa";

interface Props {
  entry: BlogEntry;
}

const { entry }: Props = Astro.props;
const { title, image, imageAlt, date, categories } = entry.data;
const entryDate = date ? formatDate(date) : null;
---

<div
  class="group h-full  rounded-lg transition-all duration-300 hover:transform hover:translate-y-8 hover:border-black intersect:animate-fadeUp opacity-0 relative overflow-visible"
>
  {/* Floating Image - appears on hover */}
  {image && (
    <div class="absolute right-0 -top-0 opacity-0 group-hover:opacity-100 transition-all duration-500 pointer-events-none z-10 group-hover:-top-64">
      <div class="relative w-48 h-48 xl:w-64 xl:h-64">
        <Image
          src={image}
          alt={imageAlt || title}
          class="w-full h-full object-cover rounded-lg shadow-2xl"
          width={500}
          height={500}
        />
      </div>
    </div>
  )}
  
  <a href={`/blog/${entry.id}`} class="block h-full ">
    <div class="glass h-full rounded-lg overflow-hidden  hover:translate-y-4 transition-all duration-300  hover:shadow-[6px_6px_0px_0px_theme(colors.black)]">
      {/* Image Section */}
      
      
      {/* Content Section */}
      <div class="p-4 flex flex-col gap-2 ">
        {/* Date */}
        <p
          class="font-notoLooped text-base md:text-lg line-clamp-3 group-hover:text-[#B59EF0] transition-colors duration-300 "
        >
          {title}
      </p>
        
        {/* Meta Information */}
        <div class="flex flex-wrap gap-2 text-sm opacity-75">
          {
            categories && categories.length > 0 && (
              <span class="flex items-center gap-1">
                <FaRegFolder className="inline-block" />
                {upperHumanize(categories[0])}
              </span>
            )
          }
        </div>
      </div>
    </div>
  </a>
</div>
