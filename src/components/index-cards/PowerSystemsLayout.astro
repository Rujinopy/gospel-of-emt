---
import type { IndexCardsEntry } from "@/types";
import BaseLayout from "@components/base/BaseLayout.astro";
import ImageSwiper from "./ImageSwiper";

interface Props {
  entry: IndexCardsEntry;
}

const { entry } = Astro.props;
const { title, description } = entry.data;

// Dynamically import all power system images
const images = import.meta.glob('/src/assets/docs/power-system/*.webp', { eager: true });

// Extract image sources and sort them numerically
const processedImages = Object.entries(images)
  .map(([path, module]) => ({
    path,
    src: (module as any).default.src,
    // Extract number from filename for sorting
    num: parseInt(path.match(/(\d+)\.webp$/)?.[1] || '0')
  }))
  .sort((a, b) => a.num - b.num)
  .map(img => img.src);

---

<BaseLayout title={title} description={description}>
  <div class="w-full min-h-screen flex flex-col">
    <div class="flex-1 flex flex-col justify-center py-4 sm:py-8">
      <ImageSwiper images={processedImages} client:load />
    </div>
  </div>
</BaseLayout>
